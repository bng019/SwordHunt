[gd_scene load_steps=36 format=3 uid="uid://cxvv8u5i8vrwy"]

[ext_resource type="Script" path="res://scripts/HSkeleton.gd" id="1_hxo8j"]
[ext_resource type="Texture2D" uid="uid://dwlei83x5h13w" path="res://Assets/UI/spritesV2/characters/skeleton.png" id="2_68w5i"]

[sub_resource type="AtlasTexture" id="AtlasTexture_kfa36"]
atlas = ExtResource("2_68w5i")
region = Rect2(0, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_c3fux"]
atlas = ExtResource("2_68w5i")
region = Rect2(64, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_qpxyr"]
atlas = ExtResource("2_68w5i")
region = Rect2(128, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_1myyt"]
atlas = ExtResource("2_68w5i")
region = Rect2(192, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_widxb"]
atlas = ExtResource("2_68w5i")
region = Rect2(256, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_kbkd5"]
atlas = ExtResource("2_68w5i")
region = Rect2(0, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_4vcbf"]
atlas = ExtResource("2_68w5i")
region = Rect2(64, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_561km"]
atlas = ExtResource("2_68w5i")
region = Rect2(128, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_vbiij"]
atlas = ExtResource("2_68w5i")
region = Rect2(192, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_f33h2"]
atlas = ExtResource("2_68w5i")
region = Rect2(256, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_b3qnn"]
atlas = ExtResource("2_68w5i")
region = Rect2(0, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_eyg28"]
atlas = ExtResource("2_68w5i")
region = Rect2(64, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_3ljge"]
atlas = ExtResource("2_68w5i")
region = Rect2(128, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_34oxg"]
atlas = ExtResource("2_68w5i")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lie0s"]
atlas = ExtResource("2_68w5i")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ry85f"]
atlas = ExtResource("2_68w5i")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ua5wd"]
atlas = ExtResource("2_68w5i")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_bi1vk"]
atlas = ExtResource("2_68w5i")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_rxgep"]
atlas = ExtResource("2_68w5i")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_aylha"]
atlas = ExtResource("2_68w5i")
region = Rect2(0, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_67yux"]
atlas = ExtResource("2_68w5i")
region = Rect2(64, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_jmbxs"]
atlas = ExtResource("2_68w5i")
region = Rect2(128, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_qocne"]
atlas = ExtResource("2_68w5i")
region = Rect2(192, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_24y08"]
atlas = ExtResource("2_68w5i")
region = Rect2(256, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_l0q46"]
atlas = ExtResource("2_68w5i")
region = Rect2(320, 64, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_tcj5k"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kfa36")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c3fux")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qpxyr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1myyt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_widxb")
}],
"loop": false,
"name": &"attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kbkd5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4vcbf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_561km")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vbiij")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f33h2")
}],
"loop": false,
"name": &"death",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_b3qnn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_eyg28")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3ljge")
}],
"loop": true,
"name": &"hit",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_34oxg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lie0s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ry85f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ua5wd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bi1vk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rxgep")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_aylha")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_67yux")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jmbxs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qocne")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_24y08")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_l0q46")
}],
"loop": true,
"name": &"walk",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_w7unt"]
radius = 4.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2dk0h"]
size = Vector2(70, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_oa64u"]
size = Vector2(70, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_21rop"]
size = Vector2(15, 17.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vwr7f"]
size = Vector2(15, 17.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nwule"]
size = Vector2(11.75, 24.1667)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_w66la"]
size = Vector2(11.75, 15)

[node name="HSkeleton" type="CharacterBody2D"]
scale = Vector2(1.2, 1.2)
script = ExtResource("1_hxo8j")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_tcj5k")
animation = &"attack"
frame = 3
frame_progress = 0.793209

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-1, 19)
shape = SubResource("CircleShape2D_w7unt")

[node name="death_timer" type="Timer" parent="."]
wait_time = 0.2

[node name="take_damage_cooldown" type="Timer" parent="."]
wait_time = 0.7

[node name="detection_area_left" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="detection_area_left"]
position = Vector2(-35, 11)
shape = SubResource("RectangleShape2D_2dk0h")

[node name="detection_area_right" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="detection_area_right"]
position = Vector2(35, 11)
shape = SubResource("RectangleShape2D_oa64u")

[node name="idle_timer" type="Timer" parent="."]
wait_time = 3.3
autostart = true

[node name="aggro_timer" type="Timer" parent="."]
wait_time = 5.0

[node name="hit_left" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="hit_left"]
position = Vector2(-12.5, 13.75)
shape = SubResource("RectangleShape2D_21rop")
debug_color = Color(1, 0, 0, 0.419608)

[node name="hit_right" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="hit_right"]
position = Vector2(12, 14)
shape = SubResource("RectangleShape2D_vwr7f")
debug_color = Color(1, 0, 0, 0.419608)

[node name="hit_up" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="hit_up"]
position = Vector2(-0.875, 2.08333)
shape = SubResource("RectangleShape2D_nwule")
debug_color = Color(1, 0, 0, 0.419608)

[node name="hit_down" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="hit_down"]
position = Vector2(-1, 30)
shape = SubResource("RectangleShape2D_w66la")
debug_color = Color(1, 0, 0, 0.419608)

[node name="atk_cooldown" type="Timer" parent="."]
wait_time = 1.5

[node name="strike_right" type="Area2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="strike_right"]
polygon = PackedVector2Array(0, -3.33333, 6.66667, 2.5, 8.33333, 12.5, 8.33333, 18.3333, 5, 27.5, 15, 25.8333, 23.3333, 18.3333, 25, 14.1667, 25, 7.5, 19.1667, -0.833333, 10.8333, -5, 1.66667, -5)

[node name="strike_left" type="Area2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="strike_left"]
scale = Vector2(-1, 1)
polygon = PackedVector2Array(0, -3.33333, 6.66667, 2.5, 8.33333, 12.5, 8.33333, 18.3333, 5, 27.5, 15, 25.8333, 23.3333, 18.3333, 25, 14.1667, 25, 7.5, 19.1667, -0.833333, 10.8333, -5, 1.66667, -5)

[node name="blink_timer" type="Timer" parent="."]
wait_time = 0.4

[connection signal="animation_finished" from="AnimatedSprite2D" to="." method="_on_animated_sprite_2d_animation_finished"]
[connection signal="timeout" from="death_timer" to="." method="_on_death_timer_timeout"]
[connection signal="timeout" from="take_damage_cooldown" to="." method="_on_take_damage_cooldown_timeout"]
[connection signal="body_entered" from="detection_area_left" to="." method="_on_detection_area_left_body_entered"]
[connection signal="body_exited" from="detection_area_left" to="." method="_on_detection_area_left_body_exited"]
[connection signal="body_entered" from="detection_area_right" to="." method="_on_detection_area_right_body_entered"]
[connection signal="body_exited" from="detection_area_right" to="." method="_on_detection_area_right_body_exited"]
[connection signal="timeout" from="idle_timer" to="." method="_on_idle_timer_timeout"]
[connection signal="timeout" from="aggro_timer" to="." method="_on_aggro_timer_timeout"]
[connection signal="body_entered" from="hit_left" to="." method="_on_hit_left_body_entered"]
[connection signal="body_exited" from="hit_left" to="." method="_on_hit_left_body_exited"]
[connection signal="body_entered" from="hit_right" to="." method="_on_hit_right_body_entered"]
[connection signal="body_exited" from="hit_right" to="." method="_on_hit_right_body_exited"]
[connection signal="body_entered" from="hit_up" to="." method="_on_hit_up_body_entered"]
[connection signal="body_exited" from="hit_up" to="." method="_on_hit_up_body_exited"]
[connection signal="body_entered" from="hit_down" to="." method="_on_hit_down_body_entered"]
[connection signal="body_exited" from="hit_down" to="." method="_on_hit_down_body_exited"]
[connection signal="timeout" from="atk_cooldown" to="." method="_on_atk_cooldown_timeout"]
[connection signal="body_entered" from="strike_right" to="." method="_on_strike_right_body_entered"]
[connection signal="body_exited" from="strike_right" to="." method="_on_strike_right_body_exited"]
[connection signal="body_entered" from="strike_left" to="." method="_on_strike_left_body_entered"]
[connection signal="body_exited" from="strike_left" to="." method="_on_strike_left_body_exited"]
[connection signal="timeout" from="blink_timer" to="." method="_on_blink_timer_timeout"]
